<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <style>
        .display {  
            display: block;
            flex: 70%;
            z-index:10;
            width: 85vh;
            justify: center;
            margin-left: auto;
            margin-right: auto;
        }
        .tags{
            display: grid;
            grid-template-columns: repeat(8, auto);
            padding: 10px;
        }
        .urls{
            display: grid;
            grid-template-columns: repeat(1, auto);
            padding: 10px;
        }
        .move_buttons{
            display: grid;
            grid-template-columns: repeat(3, auto);
            justify-content: space-between;
        }
        .shareButtons{
            display:grid;
            grid-template(1, auto);
            justify-content: space-between;
        }
    </style>
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>{{title}}</title>
        <meta name="description" content="Shepbooru - A pet project for sharing Hydrus resources.">
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://shephipster.ddns.net/" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta content="{{title}}" property="og:title">
        <meta property="og:image" content="/image/{{id}}">

    </head>
    <body>

        <center>
            {% if title == "Shepbooru" %}
            <a href="/booru">
                <h1>{{title}}</h1>
            </a>
            {% else %}
                <h1>{{title}}</h1>
            {%endif%}
        </center>

        <div class="display">
            {% include "booru/view-file.html" with fileType=type mime=mime id=id height=height width=width title=title tags=raw_tags%}
            <div class="move_buttons">
                {%if canCycle %}
                    <div class="cycle_buttons">
                        <div class="previous_button">
                            <a href="{{previousPost}}?tags={{raw_tags}}">
                                <button type="button">
                                    <img src="../../static/previous_button.png">
                                </button>
                            </a>
                        </div>
                    </div>

                    <div class="shareButtons">
                        <button onclick="copyToClipboard()">Share</button>
                        <input type="text" id="shareLink" value="http://shephipster.ddns.net/embed/{{id}}?tags={{url_tags}}">         
                    </div>
                
                    <div class="next_button">
                        <a href="{{nextPost}}?tags={{raw_tags}}">
                            <button type="button"> 
                                <img src="../../static/next_button.png">
                            </button>
                        </a>
                    </div>
                {%endif%}
            </div>
        </div>

        <center><div>
            <h2>Tags:</h2>
            <div class="tags">
                {% for tag in tags %}
                <a href="../booru/search?tags={{tag.2}}" style="text-decoration: none"><font size="3"
                    {% if tag.1 == 0 %}
                        color="#000000"
                    {% elif tag.1 == 1 %}
                        color="#22dd22"
                    {% elif tag.1 == 2 %}
                        color="#ff00ff"
                    {% elif tag.1 == 3 %}
                        color="#ff0000"
                    {% elif tag.1 == 4%}
                        color="#bb44aa"
                    {%endif%}
                >{{tag.0}}</font></a><br>
                {% endfor %}
            </div>
            <h2>Urls:</h2>
            <div class="urls">
                {% for url in urls %}
                <a href="{{url}}"><font size="3">{{url}}</font></a><br>
                {% endfor %} 
            </div>
        </div></center>
    </body>
    <script type="text/javascript">
        window.onload = function(){
            var demo = document.getElementById('html');
            var left_arrow = 37;
            var right_arrow = 39;
          
            window.onkeydown= function(gfg){
                if(gfg.keyCode === left_arrow){
                    window.location.href = '{{previousPost}}?tags={{raw_tags}}'
                };
                if(gfg.keyCode === right_arrow)
               {
                window.location.href = '{{nextPost}}?tags={{raw_tags}}'
               };
            };
        };   
        
        function copyToClipboard() {
            var copyText = document.getElementById("shareLink").value;
            if (navigator.clipboard == undefined){
                alert("Clipboard not available. Please manually copy the link");
            } else {
                navigator.clipboard.writeText(copyText.value);
            }
        }
      </script>
</html>